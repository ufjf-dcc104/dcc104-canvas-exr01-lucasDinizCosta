<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Moon Lander</title>
    <script src="sprite.js"></script>
  </head>
  <body>
    <h1>Moon Lander</h1>
    <canvas width="480" height="320">
    Seu browser não suporta canvas!</canvas>
    <script>
    var tela = document.getElementsByTagName("canvas")[0];
    var ctx = tela.getContext("2d");
    var G = 200;

    var dt = anterior = 0;
    var pc = new Sprite();

    //Main Menu campos
    var fontMainMenu = "30px Arial Black";
    var wordsColor = "white";
    var alignMainMenu = "center";
    var stateMainMenu = 0;

    /**************************************
      *           Estados:
      * 0 - Venceu;         //Pousou no ponto certo e com energia e será iniciada uma nova fase
      * 1 - Perdeu;         //quando energia foi a zero ou o pouso foi em um local errado ou pousou com velocidade de pouso determinada
      * 2 - Jogando;        //Durante a partida
      * 3 - Menu;           //Main menu tem duas opções: "new game" e "quit";
      * 4 - Game over;      //Exibe uma mensagem de game over na tela
      * 5 - Fechado;        //Tela preta
      ***************************************/


    function limparTela() {
      ctx.fillStyle = "black";
      ctx.fillRect(0,0, tela.width, tela.height);
    }

    function passo(t) {
      dt = (t - anterior)/1000;

      pc.mover(dt);
      pc.impoeLimites(0,0, tela.width, tela.height);

      limparTela();
      pc.desenhar(ctx);

      anterior = t;
      requestAnimationFrame(passo);
    }

    requestAnimationFrame(passo);

    addEventListener("keydown", function(e){
      switch (e.keyCode) {
        case 37:
          pc.ax = -100;
          break;
        case 39:
          pc.ax = +100;
          break;
        case 38:
          pc.ay = -400;
          break;
        case 40:
          pc.ay = +100;
          break;
        default:
      }
    });
    addEventListener("keyup", function(e){
      switch (e.keyCode) {
        case 37:
        case 39:
          pc.ax = 0;
          break;
        case 38:
        case 40:
          pc.ay = 0;
          break;
        default:
      }
    });

    </script>
  </body>
</html>
